(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67881,e=>{"use strict";var s=e.i(43476),a=e.i(91918),r=e.i(25913),t=e.i(47163);let n=(0,r.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:r,size:d,asChild:i=!1,...c}){let l=i?a.Slot:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,t.cn)(n({variant:r,size:d,className:e})),...c})}e.s(["Button",()=>d])},70065,e=>{"use strict";var s=e.i(43476),a=e.i(47163);function r({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function t({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function d({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>d,"CardHeader",()=>t,"CardTitle",()=>n])},23860,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(67881),t=e.i(70065);function n(){let[e,n]=(0,a.useState)("loading"),[d,i]=(0,a.useState)(""),[c,l]=(0,a.useState)(null),[o,x]=(0,a.useState)(""),[h,m]=(0,a.useState)(null),u=async()=>{n("loading");try{let e=await fetch("/api/test-mysql"),s=await e.json();s.success?(n("success"),i("")):(n("error"),i(s.error||"Unknown error"))}catch(e){n("error"),i(e instanceof Error?e.message:"Network error")}},j=async()=>{try{let e=await fetch("/api/inspect-db"),s=await e.json();m(s)}catch(e){console.error("Database inspection failed:",e)}},p=async()=>{try{let e=await fetch("/api/sales/stats?period=today"),s=await e.json();s.success?(l(s.data),x("")):(x(s.error||"Failed to fetch sales data"),l(null))}catch(e){x(e instanceof Error?e.message:"Network error"),l(null)}};return(0,a.useEffect)(()=>{u(),j()},[]),(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"MySQL Integration Test & Database Inspector"}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"MySQL Connection"}),(0,s.jsx)(t.CardDescription,{children:"Test basic MySQL database connection"})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${"loading"===e?"bg-yellow-500":"success"===e?"bg-green-500":"bg-red-500"}`}),(0,s.jsx)("span",{className:"font-medium",children:"loading"===e?"Testing...":"success"===e?"Connected":"Failed"})]}),d&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:d})}),(0,s.jsx)(r.Button,{onClick:u,disabled:"loading"===e,children:"Test Connection"})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Sales API"}),(0,s.jsx)(t.CardDescription,{children:"Test sales data retrieval from MySQL"})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsx)(r.Button,{onClick:p,children:"Test Sales API"}),o&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:o})}),c&&(0,s.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,s.jsx)("h4",{className:"font-medium text-green-800",children:"Sales Data Retrieved:"}),(0,s.jsx)("pre",{className:"text-xs text-green-700 mt-2 overflow-auto max-h-40",children:JSON.stringify(c,null,2)})]})]})]})]}),h&&(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Database Inspection"}),(0,s.jsx)(t.CardDescription,{children:"Your current database structure and data"})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Connection Status:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${h.connection?"bg-green-500":"bg-red-500"}`}),(0,s.jsx)("span",{children:h.connection?"Connected":"Failed"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Database: ",h.database]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Tables Found:"}),(0,s.jsx)("div",{className:"text-sm space-y-1",children:h.tables?.length>0?h.tables.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:e.TABLE_NAME}),(0,s.jsxs)("span",{className:"text-gray-500",children:["(",e.TABLE_ROWS," rows)"]})]},a)):(0,s.jsx)("p",{className:"text-gray-500",children:"No tables found"})})]})]}),h.salesTableStructure&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-medium mb-2",children:["Sales Table Structure (",h.salesTableStructure.tableName,"):"]}),(0,s.jsx)("div",{className:"bg-gray-50 p-3 rounded-md overflow-auto",children:(0,s.jsxs)("table",{className:"text-sm w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left p-1",children:"Column"}),(0,s.jsx)("th",{className:"text-left p-1",children:"Type"}),(0,s.jsx)("th",{className:"text-left p-1",children:"Null"}),(0,s.jsx)("th",{className:"text-left p-1",children:"Key"})]})}),(0,s.jsx)("tbody",{children:h.salesTableStructure.columns.map((e,a)=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"p-1 font-mono",children:e.Field}),(0,s.jsx)("td",{className:"p-1",children:e.Type}),(0,s.jsx)("td",{className:"p-1",children:e.Null}),(0,s.jsx)("td",{className:"p-1",children:e.Key})]},a))})]})})]}),h.sampleData&&h.sampleData.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Sample Data (First 5 rows):"}),(0,s.jsx)("div",{className:"bg-gray-50 p-3 rounded-md overflow-auto",children:(0,s.jsx)("pre",{className:"text-xs",children:JSON.stringify(h.sampleData,null,2)})})]}),h.error&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:h.error})}),(0,s.jsx)(r.Button,{onClick:j,children:"Refresh Database Inspection"})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Environment Configuration"}),(0,s.jsx)(t.CardDescription,{children:"Check if required environment variables are set"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,s.jsx)("span",{className:"text-sm",children:"Check your .env.local file has MySQL credentials"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Required variables: MYSQL_HOST, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DATABASE"})]})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Setup Instructions"})}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"1. Configure Environment Variables"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Update .env.local with your actual MySQL credentials"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"2. Check Database Connection"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Use the database inspection above to see your current tables and structure"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"3. Test Sales Data"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Once connected, test the sales API to see if data is being retrieved"})]})]})]})]})}e.s(["default",()=>n])}]);