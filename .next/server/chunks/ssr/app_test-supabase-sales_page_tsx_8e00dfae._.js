module.exports=[39001,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(3130),f=a.i(69240);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),n=(0,f.createClient)(),o=async()=>{k(!0),m("");try{let{data:a,error:b}=await n.from("sales").select(`
          id,
          quantity,
          total_price,
          sale_date,
          medicines (
            name,
            category,
            price
          )
        `).order("sale_date",{ascending:!1}).limit(10);if(b)throw b;g(a||[]);let c=new Date().toISOString().split("T")[0],{data:d}=await n.from("sales").select("quantity, total_price").gte("sale_date",`${c}T00:00:00`).lte("sale_date",`${c}T23:59:59`),{count:e}=await n.from("sales").select("*",{count:"exact",head:!0}),f=d?.reduce((a,b)=>a+(b.quantity||0),0)||0,h=d?.reduce((a,b)=>a+(b.total_price||0),0)||0;i({totalSales:e||0,todayQuantity:f,todayRevenue:h,hasData:(a?.length||0)>0})}catch(a){m(a instanceof Error?a.message:"Unknown error")}finally{k(!1)}},p=async()=>{k(!0);try{let a=await fetch("/api/add-sample-sales",{method:"POST"}),b=await a.json();b.success?await o():m(b.error||"Failed to add sample sales")}catch(a){m(a instanceof Error?a.message:"Network error")}finally{k(!1)}};return(0,c.useEffect)(()=>{o()},[]),(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Supabase Sales Data Test"}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Sales Statistics"}),(0,b.jsx)(e.CardDescription,{children:"Current sales data from Supabase"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[h&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Total Sales Records:"}),(0,b.jsx)("span",{className:"font-medium",children:h.totalSales})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Today's Units Sold:"}),(0,b.jsx)("span",{className:"font-medium",children:h.todayQuantity})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Today's Revenue:"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",h.todayRevenue?.toFixed(2)||"0.00"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Data Status:"}),(0,b.jsx)("span",{className:`font-medium ${h.hasData?"text-green-600":"text-red-600"}`,children:h.hasData?"Has Data":"No Data"})]})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(d.Button,{onClick:o,disabled:j,children:"Refresh Data"}),(0,b.jsx)(d.Button,{onClick:p,disabled:j,variant:"outline",children:"Add Sample Sales"})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Status"}),(0,b.jsx)(e.CardDescription,{children:"Connection and data status"})]}),(0,b.jsxs)(e.CardContent,{children:[l&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,b.jsx)("p",{className:"text-sm text-red-700",children:l})}),!l&&h&&(0,b.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,b.jsx)("p",{className:"text-sm text-green-700",children:"âœ… Successfully connected to Supabase sales table"})}),j&&(0,b.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,b.jsx)("p",{className:"text-sm text-blue-700",children:"Loading..."})})]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Recent Sales Data"}),(0,b.jsx)(e.CardDescription,{children:"Last 10 sales records from your Supabase database"})]}),(0,b.jsx)(e.CardContent,{children:a.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("th",{className:"text-left p-2",children:"Date"}),(0,b.jsx)("th",{className:"text-left p-2",children:"Medicine"}),(0,b.jsx)("th",{className:"text-left p-2",children:"Category"}),(0,b.jsx)("th",{className:"text-left p-2",children:"Quantity"}),(0,b.jsx)("th",{className:"text-left p-2",children:"Total Price"})]})}),(0,b.jsx)("tbody",{children:a.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("td",{className:"p-2",children:new Date(a.sale_date).toLocaleDateString()}),(0,b.jsx)("td",{className:"p-2",children:a.medicines?.name||"Unknown"}),(0,b.jsx)("td",{className:"p-2",children:a.medicines?.category||"N/A"}),(0,b.jsx)("td",{className:"p-2",children:a.quantity}),(0,b.jsxs)("td",{className:"p-2",children:["$",a.total_price?.toFixed(2)||"0.00"]})]},a.id))})]})}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)("p",{children:"No sales data found"}),(0,b.jsx)(d.Button,{onClick:p,className:"mt-4",disabled:j,children:"Add Sample Sales Data"})]})})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=app_test-supabase-sales_page_tsx_8e00dfae._.js.map