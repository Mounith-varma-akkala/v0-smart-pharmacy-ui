module.exports=[8001,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(88237),i=a.i(7554),j=a.i(70121),k=a.i(50104),l=a.i(92843),m=a.i(25152),n=a.i(96743),o=a.i(22297),p=a.i(92616),q=a.i(77192),r=a.i(30553),s=a.i(86228),t=a.i(52081),u=a.i(41852),v=a.i(11011),w="Dialog",[x,y]=(0,k.createContextScope)(w),[z,A]=x(w),B=a=>{let{__scopeDialog:d,children:e,open:f,defaultOpen:g,onOpenChange:h,modal:i=!0}=a,j=c.useRef(null),k=c.useRef(null),[n=!1,o]=(0,m.useControllableState)({prop:f,defaultProp:g,onChange:h});return(0,b.jsx)(z,{scope:d,triggerRef:j,contentRef:k,contentId:(0,l.useId)(),titleId:(0,l.useId)(),descriptionId:(0,l.useId)(),open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),modal:i,children:e})};B.displayName=w;var C="DialogTrigger",D=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=A(C,d),g=(0,j.useComposedRefs)(c,f.triggerRef);return(0,b.jsx)(r.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":V(f.open),...e,ref:g,onClick:(0,i.composeEventHandlers)(a.onClick,f.onOpenToggle)})});D.displayName=C;var E="DialogPortal",[F,G]=x(E,{forceMount:void 0}),H=a=>{let{__scopeDialog:d,forceMount:e,children:f,container:g}=a,h=A(E,d);return(0,b.jsx)(F,{scope:d,forceMount:e,children:c.Children.map(f,a=>(0,b.jsx)(q.Presence,{present:e||h.open,children:(0,b.jsx)(p.Portal,{asChild:!0,container:g,children:a})}))})};H.displayName=E;var I="DialogOverlay",J=c.forwardRef((a,c)=>{let d=G(I,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=A(I,a.__scopeDialog);return g.modal?(0,b.jsx)(q.Presence,{present:e||g.open,children:(0,b.jsx)(K,{...f,ref:c})}):null});J.displayName=I;var K=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=A(I,d);return(0,b.jsx)(t.RemoveScroll,{as:v.Slot,allowPinchZoom:!0,shards:[f.contentRef],children:(0,b.jsx)(r.Primitive.div,{"data-state":V(f.open),...e,ref:c,style:{pointerEvents:"auto",...e.style}})})}),L="DialogContent",M=c.forwardRef((a,c)=>{let d=G(L,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=A(L,a.__scopeDialog);return(0,b.jsx)(q.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(N,{...f,ref:c}):(0,b.jsx)(O,{...f,ref:c})})});M.displayName=L;var N=c.forwardRef((a,d)=>{let e=A(L,a.__scopeDialog),f=c.useRef(null),g=(0,j.useComposedRefs)(d,e.contentRef,f);return c.useEffect(()=>{let a=f.current;if(a)return(0,u.hideOthers)(a)},[]),(0,b.jsx)(P,{...a,ref:g,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:(0,i.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,i.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),O=c.forwardRef((a,d)=>{let e=A(L,a.__scopeDialog),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(P,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),P=c.forwardRef((a,d)=>{let{__scopeDialog:e,trapFocus:f,onOpenAutoFocus:g,onCloseAutoFocus:h,...i}=a,k=A(L,e),l=c.useRef(null),m=(0,j.useComposedRefs)(d,l);return(0,s.useFocusGuards)(),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.FocusScope,{asChild:!0,loop:!0,trapped:f,onMountAutoFocus:g,onUnmountAutoFocus:h,children:(0,b.jsx)(n.DismissableLayer,{role:"dialog",id:k.contentId,"aria-describedby":k.descriptionId,"aria-labelledby":k.titleId,"data-state":V(k.open),...i,ref:m,onDismiss:()=>k.onOpenChange(!1)})}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Z,{titleId:k.titleId}),(0,b.jsx)($,{contentRef:l,descriptionId:k.descriptionId})]})]})}),Q="DialogTitle",R=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=A(Q,d);return(0,b.jsx)(r.Primitive.h2,{id:f.titleId,...e,ref:c})});R.displayName=Q;var S="DialogDescription";c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=A(S,d);return(0,b.jsx)(r.Primitive.p,{id:f.descriptionId,...e,ref:c})}).displayName=S;var T="DialogClose",U=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=A(T,d);return(0,b.jsx)(r.Primitive.button,{type:"button",...e,ref:c,onClick:(0,i.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})});function V(a){return a?"open":"closed"}U.displayName=T;var W="DialogTitleWarning",[X,Y]=(0,k.createContext)(W,{contentName:L,titleName:Q,docsSlug:"dialog"}),Z=({titleId:a})=>{let b=Y(W),d=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return c.useEffect(()=>{a&&(document.getElementById(a)||console.error(d))},[d,a]),null},$=({contentRef:a,descriptionId:b})=>{let d=Y("DialogDescriptionWarning"),e=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${d.contentName}}.`;return c.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(e))},[e,a,b]),null},_=a.i(62213),_=_,aa=a.i(97895);function ab({...a}){return(0,b.jsx)(B,{"data-slot":"dialog",...a})}function ac({...a}){return(0,b.jsx)(D,{"data-slot":"dialog-trigger",...a})}function ad({...a}){return(0,b.jsx)(H,{"data-slot":"dialog-portal",...a})}function ae({className:a,...c}){return(0,b.jsx)(J,{"data-slot":"dialog-overlay",className:(0,aa.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function af({className:a,children:c,showCloseButton:d=!0,...e}){return(0,b.jsxs)(ad,{"data-slot":"dialog-portal",children:[(0,b.jsx)(ae,{}),(0,b.jsxs)(M,{"data-slot":"dialog-content",className:(0,aa.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...e,children:[c,d&&(0,b.jsxs)(U,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(_.default,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ag({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,aa.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function ah({className:a,...c}){return(0,b.jsx)(R,{"data-slot":"dialog-title",className:(0,aa.cn)("text-lg leading-none font-semibold",a),...c})}var ai=a.i(70106);let aj=(0,ai.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ak=(0,ai.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),al=(0,ai.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var am=a.i(69520),an=a.i(56657),ao=a.i(69240),ap=a.i(77687);function aq(){let{toast:a}=(0,ap.useToast)(),i=(0,ao.createClient)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)({name:"",category:"",quantity:0,price:0,expiry_date:"",batch_number:"",supplier:"",reorder_level:0}),t=async()=>{m(!0);let{data:b,error:c}=await i.from("medicines").select("*").order("name");c?a({title:"Error fetching medicines",description:c.message,variant:"destructive"}):k(b||[]),m(!1)};(0,c.useEffect)(()=>{t();let a=i.channel("inventory-changes").on("postgres_changes",{event:"*",schema:"public",table:"medicines"},()=>{t()}).subscribe();return()=>{i.removeChannel(a)}},[]);let u=async b=>{if(b.preventDefault(),p){let{error:b}=await i.from("medicines").update(r).eq("id",p.id);b?a({title:"Error updating medicine",description:b.message,variant:"destructive"}):(a({title:"Medicine updated successfully"}),o(!1),w())}else{let{error:b}=await i.from("medicines").insert([r]);b?a({title:"Error adding medicine",description:b.message,variant:"destructive"}):(a({title:"Medicine added successfully"}),o(!1),w())}},v=async b=>{if(confirm("Are you sure you want to delete this medicine?")){let{error:c}=await i.from("medicines").delete().eq("id",b);c?a({title:"Error deleting medicine",description:c.message,variant:"destructive"}):a({title:"Medicine deleted successfully"})}},w=()=>{s({name:"",category:"",quantity:0,price:0,expiry_date:"",batch_number:"",supplier:"",reorder_level:0}),q(null)};return(0,b.jsx)(an.default,{role:"admin",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-normal mb-2",children:"Inventory Management"}),(0,b.jsx)("p",{className:"text-muted-foreground font-light",children:"Real-time medicine stock tracking with full CRUD operations"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{onClick:t,variant:"outline",className:"font-normal bg-transparent",children:[(0,b.jsx)(am.RefreshCw,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,b.jsxs)(ab,{open:n,onOpenChange:o,children:[(0,b.jsx)(ac,{asChild:!0,children:(0,b.jsxs)(e.Button,{onClick:()=>w(),className:"font-normal",children:[(0,b.jsx)(aj,{className:"w-4 h-4 mr-2"}),"Add Medicine"]})}),(0,b.jsxs)(af,{className:"max-w-2xl",children:[(0,b.jsx)(ag,{children:(0,b.jsx)(ah,{className:"font-normal",children:p?"Edit Medicine":"Add New Medicine"})}),(0,b.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"name",className:"font-normal",children:"Medicine Name"}),(0,b.jsx)(f.Input,{id:"name",value:r.name,onChange:a=>s({...r,name:a.target.value}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"category",className:"font-normal",children:"Category"}),(0,b.jsx)(f.Input,{id:"category",value:r.category,onChange:a=>s({...r,category:a.target.value}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"quantity",className:"font-normal",children:"Quantity"}),(0,b.jsx)(f.Input,{id:"quantity",type:"number",value:r.quantity,onChange:a=>s({...r,quantity:Number(a.target.value)}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"price",className:"font-normal",children:"Price ($)"}),(0,b.jsx)(f.Input,{id:"price",type:"number",step:"0.01",value:r.price,onChange:a=>s({...r,price:Number(a.target.value)}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"expiry_date",className:"font-normal",children:"Expiry Date"}),(0,b.jsx)(f.Input,{id:"expiry_date",type:"date",value:r.expiry_date,onChange:a=>s({...r,expiry_date:a.target.value}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"batch_number",className:"font-normal",children:"Batch Number"}),(0,b.jsx)(f.Input,{id:"batch_number",value:r.batch_number,onChange:a=>s({...r,batch_number:a.target.value}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"supplier",className:"font-normal",children:"Supplier"}),(0,b.jsx)(f.Input,{id:"supplier",value:r.supplier,onChange:a=>s({...r,supplier:a.target.value}),required:!0,className:"font-light"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"reorder_level",className:"font-normal",children:"Reorder Level"}),(0,b.jsx)(f.Input,{id:"reorder_level",type:"number",value:r.reorder_level,onChange:a=>s({...r,reorder_level:Number(a.target.value)}),required:!0,className:"font-light"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>o(!1),className:"font-normal",children:"Cancel"}),(0,b.jsxs)(e.Button,{type:"submit",className:"font-normal",children:[p?"Update":"Add"," Medicine"]})]})]})]})]})]})]}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Name"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Category"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Quantity"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Price"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Expiry Date"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Batch No"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Supplier"}),(0,b.jsx)(h.TableHead,{className:"font-normal",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:l?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8 font-light",children:"Loading medicines..."})}):0===j.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8 font-light",children:"No medicines found. Add your first medicine to get started."})}):j.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-normal",children:a.name}),(0,b.jsx)(h.TableCell,{className:"font-light",children:a.category}),(0,b.jsx)(h.TableCell,{className:"font-light",children:a.quantity}),(0,b.jsxs)(h.TableCell,{className:"font-light",children:["$",a.price]}),(0,b.jsx)(h.TableCell,{className:"font-light",children:a.expiry_date}),(0,b.jsx)(h.TableCell,{className:"font-mono text-sm font-light",children:a.batch_number}),(0,b.jsx)(h.TableCell,{className:"font-light",children:a.supplier}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>{q(a),s({name:a.name,category:a.category,quantity:a.quantity,price:a.price,expiry_date:a.expiry_date,batch_number:a.batch_number,supplier:a.supplier,reorder_level:a.reorder_level}),o(!0)},className:"font-normal",children:(0,b.jsx)(ak,{className:"w-4 h-4"})}),(0,b.jsx)(e.Button,{size:"sm",variant:"destructive",onClick:()=>v(a.id),className:"font-normal",children:(0,b.jsx)(al,{className:"w-4 h-4"})})]})})]},a.id))})]})})]})})}a.s(["default",()=>aq],8001)}];

//# sourceMappingURL=app_admin_inventory_page_tsx_72877e18._.js.map